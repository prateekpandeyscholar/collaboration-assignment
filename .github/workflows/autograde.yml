 - name: Save score for GitHub Classroom
        shell: bash
        run: |
          SCORE_VAL=$(grep -Eo '^SCORE=[0-9]+' "$GITHUB_ENV" | cut -d= -f2 || echo 0)
          T1=$(grep -Eo '^T1=[0-9]+' "$GITHUB_ENV" | cut -d= -f2 || echo 0)
          T2=$(grep -Eo '^T2=[0-9]+' "$GITHUB_ENV" | cut -d= -f2 || echo 0)
          T3=$(grep -Eo '^T3=[0-9]+' "$GITHUB_ENV" | cut -d= -f2 || echo 0)
          T4=$(grep -Eo '^T4=[0-9]+' "$GITHUB_ENV" | cut -d= -f2 || echo 0)
          T5=$(grep -Eo '^T5=[0-9]+' "$GITHUB_ENV" | cut -d= -f2 || echo 0)
          T6=$(grep -Eo '^T6=[0-9]+' "$GITHUB_ENV" | cut -d= -f2 || echo 0)
          echo "Final SCORE=$SCORE_VAL"
          mkdir -p .github/classroom
          cat > .github/classroom/results.json <<EOF
          {
            "version": 1,
            "tests": [
              { "name": "team_greetings.md exists", "score": $T1, "max_score": 1 },
              { "name": "Roll number format",       "score": $T2, "max_score": 1 },
              { "name": "3+ unique roll numbers",   "score": $T3, "max_score": 1 },
              { "name": "Branch name feature/ID",   "score": $T4, "max_score": 2 },
              { "name": "2+ collaborators (API)",   "score": $T5, "max_score": 2 },
              { "name": "2+ commit authors (API)",  "score": $T6, "max_score": 2 }
            ],
            "summary": "Total score $SCORE_VAL out of 9"
          }
          EOF
